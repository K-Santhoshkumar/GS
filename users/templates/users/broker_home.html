{% extends "config/base.html" %}
{% block title %}Broker Home{% endblock %}

{% block extra_css %}
<style>
  .dashboard-shell {
    max-width: 640px;
    margin: 80px auto;
    padding: 32px;
    background: #fff;
    border-radius: 18px;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08);
  }
  .dashboard-shell h2 {
    margin-bottom: 12px;
    font-size: 1.75rem;
  }
  .status-msg {
    margin-bottom: 24px;
    padding: 16px;
    border-radius: 12px;
    font-weight: 500;
  }
  .status-warning {
    background: #fff7e6;
    color: #8a5b00;
  }
  .status-info {
    background: #eef6ff;
    color: #1e4db7;
  }
  .contact-box {
    margin-top: 16px;
    font-size: 14px;
    color: #333;
  }
  .dashboard-actions {
    display: flex;
    gap: 14px;
    flex-wrap: wrap;
    align-items: center;
  }
  .dashboard-btn {
    padding: 12px 20px;
    border-radius: 999px;
    font-weight: 600;
    border: none;
    cursor: pointer;
    text-decoration: none;
  }
  .dashboard-btn.primary {
    background: #111;
    color: #fff;
  }
  .dashboard-btn.secondary {
    background: #f4f4f4;
    color: #222;
    border: 1px solid #ddd;
  }
</style>
{% endblock %}

{% block content %}
<section class="dashboard-shell">

  <h2>Welcome, Broker!</h2>

  <!-- ================= STATUS MESSAGE ================= -->
  {% if percent_complete < 100 %}
    <div class="status-msg status-warning">
      Your profile is <strong>{{ percent_complete }}%</strong> complete.
      Please complete your profile to proceed.
    </div>

  {% elif percent_complete == 100 and not profile_active %}
    <div class="status-msg status-info">
      We have received your details and will activate your account soon.
    </div>

    <div class="contact-box">
      For any queries, please contact:<br>
      ðŸ“§ <strong>support@yourcompany.com</strong><br>
      ðŸ“ž <strong>+91 98765 43210</strong>
    </div>
  {% endif %}

  <!-- ================= ACTION BUTTONS ================= -->
  <div class="dashboard-actions" style="margin-top: 32px;">

    {% if percent_complete < 100 %}
      <!-- âŒ Incomplete profile -->
      <a
        href="{% url 'users:broker:broker_profile' %}"
        class="dashboard-btn primary"
      >
        Complete Profile
      </a>

    {% elif percent_complete == 100 and not profile_active %}
      <!-- âœ… Completed but pending activation -->
      <a
        href="{% url 'users:broker:broker_profile' %}"
        class="dashboard-btn primary"
      >
        View Profile
      </a>
    {% endif %}

    <form method="post" action="{% url 'users:broker:broker_logout' %}">
      {% csrf_token %}
      <button type="submit" class="dashboard-btn secondary">
        Logout
      </button>
    </form>

  </div>

</section>
{% endblock %}
