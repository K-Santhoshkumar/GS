{% extends "config/base.html" %} {% load static %} {% block title %}Goalstox -
Employee Login{% endblock %} {% block extra_css %}
<link rel="stylesheet" href="{% static 'css/broker_login.css' %}" />
{% endblock %} {% block content %}
<div class="login-container">
  <div id="popup-message-container"></div>

  <form class="login-form" method="post" autocomplete="off">
    {% csrf_token %}
    <h1>Goalstox</h1>
    <h3>Employee Login</h3>
    <p class="welcome-text">Welcome back! Please sign in to your account</p>
    <label for="email">Email address</label>
    <input
      type="email"
      id="email"
      name="email"
      placeholder="yourname@yourmail.com"
      required
      value="{{ request.POST.email }}"
    />

    <button type="button" class="btn-send-otp" onclick="sendOtp(event)">
      Send OTP
    </button>

    <div class="otp-input-section" id="otp-section" style="display: none">
      <label for="otp_code">Enter OTP</label>
      <input
        type="text"
        id="otp_code"
        name="otp_code"
        placeholder="Enter 6-digit OTP"
        required
        maxlength="6"
        class="otp-input"
        value="{{ request.POST.otp_code }}"
      />
      <button type="submit" class="btn-verify-otp">Verify OTP</button>
    </div>
  </form>
</div>
{% endblock %} {% block extra_js %}
<script src="{% static 'users/employee_login.js' %}"></script>
{% comment %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const messages = [
      {% for message in messages %}
      { text: "{{ message|escapejs }}", type: "{{ message.tags }}" },
      {% endfor %}
    ];
    const container = document.getElementById("popup-message-container");

    if (container && messages.length > 0) {
      messages.forEach((msg) => {
        const div = document.createElement("div");
        div.className = "popup-message " + msg.type;
        div.textContent = msg.text;
        container.appendChild(div);
        setTimeout(() => {
          div.style.opacity = "0";
          setTimeout(() => {
            container.removeChild(div);
          }, 500);
        }, 3000);
      });
    }
  });
</script>
{% endcomment %} {% endblock %}
